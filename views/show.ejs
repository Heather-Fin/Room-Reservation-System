<% include partials/header %>

<div class="container-fluid pt-5 pb-5 text-center bg-light">

	<h3 class="mb-2"><%= room.name %></h3>
	<p><img src="/images/<%= room.image %>" class="rounded" style="width: 400px; height: 400px; object-fit: cover;" /></p>
	<p><b>Room size:</b> <%= room.size %></p>

	<% if (user && user.username === "admin") { %>
		<a class="btn btn-warning" href="/rooms/<%= room._id %>/edit" role="button">Edit room</a>

		<form action="/rooms/<%= room._id %>?_method=DELETE" method="POST">
			<button type="submit" class="mt-3 btn btn-danger">Delete room</button>
		</form>
	<% } %>

	<% if(user){ %>

		<form action="/reservations/<%= room._id %>" method="POST" class="justify-content-center mt-3 form-inline">

			<input name="date" id="date" type="text" class="form-control mr-3" maxlength="10" readonly="readonly" style="background:white;">

			<button id="submit" type="submit" class="btn btn-primary">Reserve room</button>
			
		</form>

	<% } %>


	<p class="mt-3">
	<a href="/">Back to List</a>
	</p>

</div>

<script src="/javascripts/date-validation.js"></script>

<script>
var disabledDates = <%- JSON.stringify(room.reservations) %>;

function DisableSpecificDates(date) {
	var string = jQuery.datepicker.formatDate('mm/dd/yy', date);
    return [disabledDates.indexOf(string) == -1];
}

$(function() {
  $("#date").datepicker({
  	minDate : 0,
  	maxDate : '+1M',
  	dateFormat: "mm/dd/yy",
    beforeShowDay: DisableSpecificDates
  });
});
</script>


<% include partials/footer %>